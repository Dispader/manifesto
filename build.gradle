plugins {
    id 'project-report'
    id 'build-announcements'
    id 'groovy'
    id 'org.unbroken-dome.test-sets' version '1.3.2'
    id 'com.gradle.plugin-publish' version '0.9.4'
    id 'org.sonarqube' version '2.2.1'
}
apply from: './gradle/code-quality.gradle'

version = '1.0.5'
group = 'com.github.dispader.manifesto'
pluginBundle {
    website = 'https://github.com/Dispader/manifesto'
    vcsUrl = 'https://github.com/Dispader/manifesto'
    description = 'JAr and WAr manifests made less painful.'
    tags = ['version', 'versioning', 'git', 'describe', 'git describe']

    plugins {
        greetingsPlugin {
            id = 'com.github.dispader.manifesto'
            displayName = 'Manifesto plugin'
        }
    }
}

repositories.jcenter()
dependencies {
    compile gradleApi()
    compile localGroovy()
    compile 'org.ajoberstar:grgit:1.8.0'
    testCompile('org.spockframework:spock-core:1.0-groovy-2.4') {
        exclude module: "groovy-all"
    }
}

testSets {
    integrationTest { dirName = 'integration-test' }
}
integrationTest.group = 'Verification'
integrationTest.description = 'Runs the integration tests.'
integrationTestJar.group =
tasks.withType(Test) {
    testLogging.exceptionFormat = 'full'
}
